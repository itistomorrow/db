<?
include "includes/DBaccess.php";
include "includes/session.php";

$_SESSION[ss_tableOpt] = 1;
$_SESSION[ss_tableInp] = "";

?>
<!DOCTYPE html>
<html lang="kr">
	<head>
		<meta charset="euc-kr">

		<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame
		Remove this if you use the .htaccess -->
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

		<title></title>
		<meta name="description" content="">
		<meta name="author" content="DaHam">

		<meta name="viewport" content="width=device-width; initial-scale=1.0">

		<!-- Bootstrap -->
		<link href="css/bootstrap.min.css" rel="stylesheet">

		<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
		<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
		<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
		<![endif]-->
		<script language="JavaScript">
			var color = "#FFFF7E";

			function addRow(var1, var2, var3, var4, var5, var6, var7, var8, var9, var10, var11, var12, var13) {

				var tbody = document.getElementById("output_table").getElementsByTagName("TBODY")[0];
				var row = document.createElement("TR");
				row.style.backgroundColor = color;

				var td1 = document.createElement("TD");
				td1body = "<p align='center'>" + var1 + "</p>";
				td1.insertAdjacentHTML('beforeEnd', td1body);

				var td2 = document.createElement("TD");
				td2body = "<p align='center'>" + var2 + "</p>";
				td2.insertAdjacentHTML('beforeEnd', td2body);

				var td3 = document.createElement("TD");
				td3body = "<p align='center'>" + var3 + "</p>";
				td3.insertAdjacentHTML('beforeEnd', td3body);

				var td4 = document.createElement("TD");
				td4body = "<p align='center'>" + var4 + "</p>";
				td4.insertAdjacentHTML('beforeEnd', td4body);

				var td5 = document.createElement("TD");
				td5body = "<p align='center'>" + var5 + "</p>";
				td5.insertAdjacentHTML('beforeEnd', td5body);

				var td6 = document.createElement("TD");
				td6body = "<p align='center'>" + var6 + "</p>";
				td6.insertAdjacentHTML('beforeEnd', td6body);

				var td7 = document.createElement("TD");
				td7body = "<p align='center'>" + var7 + "</p>";
				td7.insertAdjacentHTML('beforeEnd', td7body);

				var data14;
				if (var13 == "월")
					data14 = "(월, 수)";
				else if (var13 == "화")
					data14 = "(화, 목)";
				else
					data14 = "(금)";
				var td8 = document.createElement("TD");
				td8body = "<p align='center'>" + var8 + "-" + var9 + " " + data14 + "</p>";
				td8.insertAdjacentHTML('beforeEnd', td8body);

				var td10 = document.createElement("TD");
				td10body = "<p align='center'>" + var10 + "</p>";
				td10.insertAdjacentHTML('beforeEnd', td10body);

				var td11 = document.createElement("TD");
				td11body = "<p align='center'>" + var11 + "</p>";
				td11.insertAdjacentHTML('beforeEnd', td11body);

				var td12 = document.createElement("TD");
				td12body = "<p align='center'>" + var12 + "</p>";
				td12.insertAdjacentHTML('beforeEnd', td12body);

				row.appendChild(td1);
				row.appendChild(td2);
				row.appendChild(td3);
				row.appendChild(td4);
				row.appendChild(td5);
				row.appendChild(td6);
				row.appendChild(td7);
				row.appendChild(td8);
				row.appendChild(td10);
				row.appendChild(td11);

				tbody.appendChild(row);

			}

		</script>
	</head>

	<body>
		<div>
			<header>

			</header>
			<nav>

			</nav>

			<div>
				<form name=SEARCH method=POST action="stu_class_search.php">

					<p>
						&nbsp;
					</p>
					<table border="0" width="927" height="32" align="center">
						<tr>
							<td width="140" height="26"><font size ="3"><b></b></font></td>

						</tr>
					</table>
					<BR>
					<BR>

					<table id ="output_table" width="914" height="66" align="center">
						<tbody>
							<tr>
								<td width="60" rowspan="2" height="30" bgcolor="#B4FFFF" >
								<p align="center">
									<b>과목번호</b>
								</p></td>
								<td width="55" rowspan="2" height="30" bgcolor="#B4FFFF">
								<p align="center">
									<b>과목분반</b>
								</p></td>
								<td width="80" rowspan="2" height="30" bgcolor="#B4FFFF" >
								<p align="center">
									<b>과목번호</b>
								</p></td>
								<td width="38" rowspan="2" height="30" bgcolor="#B4FFFF" >
								<p align="center">
									<b>분반</b>
								</p></td>
								<td width="94" rowspan="2" height="30" bgcolor="#B4FFFF" >
								<p align="center">
									<b>과목이름</b>
								</p></td>
								<td width="70" rowspan="2" height="30" bgcolor="#B4FFFF" >
								<p align="center">
									<b>교수</b>
								</p></td>
								<td width="70" rowspan="2" height="30" bgcolor="#B4FFFF">
								<p align="center">
									<b>개설학과</b>
								</p></td>
								<td width="70" rowspan="2" height="30" bgcolor="#B4FFFF" >
								<p align="center">
									<b>교과구분</b>
								</p></td>
								<td width="55" rowspan="2" height="30" bgcolor="#B4FFFF">
								<p align="center">
									<b>수강학년</b>
								</p></td>
								<td width="55" rowspan="2" height="30" bgcolor="#B4FFFF" align="center">
								<p align="center">
									<b>수강학기</b>
								</p></td>
							</tr>
							<tr>

							</tr>
						</tbody>
					</table>

					<?

					$query = "SELECT A.과목수강학년, A.과목수강학기, A.과목번호, A.과목분반, A.과목이름, A.과목구분, C.이름, B.강의실번호, B.시작시간, B.종료시간, B.강의요일
					FROM (SELECT A.과목수강학년, A.과목수강학기, A.과목번호, A.과목분반, A.과목이름, A.과목구분, B.구성원번호
					FROM (SELECT 과목수강학년, 과목수강학기, 과목.과목번호, 과목분반, 과목구분, 과목이름 FROM 과목, 분반편성 WHERE 과목.과목번호 = 분반편성.과목번호 ".$tmpQuery.") A,
					수업편성 B
					WHERE A.과목번호 = B.과목번호 AND A.과목분반 = B.과목분반) A,
					(SELECT A.과목번호, A.과목분반, A.과목이름, A.과목구분, B.강의실번호, C.시작시간, C.종료시간, C.강의요일
					FROM (SELECT 과목.과목번호, 과목분반, 과목구분, 과목이름 FROM 과목, 분반편성 WHERE 과목.과목번호 = 분반편성.과목번호 ".$tmpQuery.") A,
					강의실 B, 강의정보 C
					WHERE A.과목번호 = B.과목번호 AND A.과목분반 = B.과목분반 AND B.과목번호 = C.과목번호 AND B.과목분반 = C.과목분반) B,
					구성원정보 C
					WHERE A.과목번호 = B.과목번호 AND A.과목분반 = B.과목분반 AND A.구성원번호 = C.구성원번호";
					$success = oci_parse($connect,$query);
					oci_execute($success);

					$row =" - ";
					while($data = oci_fetch_array($success, OCI_ASSOC)) {
					echo "
					<script language=javascript>
addRow(\"$data[과목번호]\", \"$data[과목분반]\", \"$data[과목이름]\", \"$data[이름]\",
\"정보컴퓨터공학부\", \"$data[과목구분]\", \"$data[강의실번호]\", \"$data[시작시간]\", \"$data[종료시간]\",
\"$data[과목수강학년]\", \"$data[과목수강학기]\", \" \",\"$data[강의요일]\");
					</script>";
					}
					?>

				</form>
			</div>

			<footer>

			</footer>
		</div>

		<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
		<!-- Include all compiled plugins (below), or include individual files as needed -->
		<script src="js/bootstrap.min.js"></script>
	</body>
</html>

